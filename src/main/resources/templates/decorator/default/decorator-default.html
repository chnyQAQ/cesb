<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">

	<head>
		
		<title layout:title-pattern="$CONTENT_TITLE"></title>
		
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		
		<link th:href="@{/decorator/icon.png}" rel="icon" type="image/png">
		
		<script th:inline="javascript">
		/*<![CDATA[*/
			// 获取 contextPath
			contextPath = /*[[@{/}]]*/ '';
			contextPath = contextPath.substr(0, contextPath.length-1);
		/*]]>*/
		mxBasePath = contextPath +'/webjars/mxgraph/javascript/src';
		</script>
		
		<!-- webjar jquery -->
		<script th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
		<script th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
		<link  th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}" rel="stylesheet">
		<script th:src="@{/webjars/jquery.serializeJSON/2.9.0/jquery.serializejson.min.js}"></script>
		<script th:src="@{/webjars/jquery.nicescroll/3.7.6/jquery.nicescroll.min.js}"></script>
		<!-- webjar others -->
		<script th:src="@{/webjars/popper.js/1.15.0/dist/umd/popper.min.js}"></script>
		<link  th:href="@{/static/lib/todc-bootstrap/4.3.1-alpha/dist/css/todc-bootstrap.min.css}" rel="stylesheet">
		<script th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
		<link  th:href="@{/webjars/font-awesome/5.9.0/css/all.css}" rel="stylesheet">
		<link  th:href="@{/webjars/pace/1.0.2/themes/blue/pace-theme-minimal.css}" rel="stylesheet">
		<script th:src="@{/webjars/pace/1.0.2/pace.min.js}"></script>
		<link  th:href="@{/webjars/toastr/2.1.2/build/toastr.min.css}" rel="stylesheet">
		<script th:src="@{/webjars/toastr/2.1.2/build/toastr.min.js}"></script>
		<script th:src="@{/webjars/underscore/1.9.1/underscore-min.js}"></script>
		<script th:src="@{/webjars/mxgraph/javascript/mxClient.js}"></script>
		<link  th:href="@{/webjars/datetimepicker/build/jquery.datetimepicker.min.css}" rel="stylesheet">
		<script th:src="@{/webjars/datetimepicker/build/jquery.datetimepicker.full.min.js}"></script>
		<script th:src="@{/webjars/echarts/4.2.1/dist/echarts.min.js}"></script>
		<!-- ui css -->
		<link  th:href="@{/lib/ui/css/alerts.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/badge.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/breadcrumb.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/button.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/card.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/detail.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/dropdown.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/dropdown-cascade.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/form.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/footer.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/grid.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/layout.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/modal.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/nav.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/pace.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/pagination.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/placeholder.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/scroll.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/table.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/tabs.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/toast.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/tooltip.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/validate.css}" rel="stylesheet">
		<link  th:href="@{/lib/ui/css/width.css}" rel="stylesheet">
		<!-- ui js -->
		<script th:src="@{/lib/ui/js/jquery.alert.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.bsPagination.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.buttonActions.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.confirm.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.confirmDelete.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.deserialize.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.dictionary.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.dropdownActions.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.dropdownSearch.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.dropdownSearchCascade.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.dropdownSearchTree.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formFill.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formPost.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formPut.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formSearch.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formSearchPage.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formSearchPageRows.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formSearchRows.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.formValidate.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.modalPost.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.modalPut.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.obj.js}"></script>
		<script th:src="@{/lib/ui/js/jquery.selection.js}"></script>
		<!-- utils -->
		<script th:src="@{/lib/utils/date.js}"></script>
		<script th:src="@{/lib/utils/util.js}"></script>
		<!-- decorator -->
		<link th:href="@{/decorator/default/decorator-default.css}" rel="stylesheet">
		<script th:src="@{/decorator/default/decorator-default.js}"></script>
		
		
	</head>
	
	<body th:with="pageUri=${#httpServletRequest.requestURI}">
		
		<nav class="navbar navbar-expand">
			<a class="navbar-brand mr-5" href="#">
				<img alt="" th:src="@{/decorator/icon.png}" width="32px" class="mr-2">
				<strong>DESB</strong>
			</a>
			<ul class="navbar-nav mr-auto"></ul>
			<ul class="navbar-nav">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown"><span th:text="${session.username}"></span></a>
					<div class="dropdown-menu dropdown-menu-right">
						<a class="dropdown-item" th:href="@{/logout}"><i class="fas fa-sign-out-alt"></i> 注销</a>
					</div>
				</li>
			</ul>
		</nav>
		
		<div class="page-wrapper">
			<div class="nav-container">
				<ul class="nav flex-column">
	
					<li class="nav-item" 
						th:with="uri=@{/}" 
						th:classappend="(${pageUri} eq ${uri}) ? 'active' : ''">
						<a class="nav-link" th:href="${uri}"><i class="fas fa-home"></i> 首页</a>
					</li>
					
					<li class="nav-item" 
						th:with="rests=@{/rests}, https=@{/https}, files=@{/files}, ftps=@{/ftps}, webservices=@{/webservices}, generals=@{/generals}"
						th:classappend="${ #strings.startsWith(pageUri, rests) or #strings.startsWith(pageUri, https) or #strings.startsWith(pageUri, files) or #strings.startsWith(pageUri, ftps) or #strings.startsWith(pageUri, webservices) or #strings.startsWith(pageUri, generals) } ? 'active' : ''"
						>
						<a class="nav-link" href="#nav-endpoint" data-toggle="collapse"
							th:attr="aria-expanded=${ #strings.startsWith(pageUri, rests) or  #strings.startsWith(pageUri, https) or #strings.startsWith(pageUri, files) or #strings.startsWith(pageUri, ftps) or #strings.startsWith(pageUri, generals) }"
							th:classappend="${ #strings.startsWith(pageUri, rests) or #strings.startsWith(pageUri, https) or #strings.startsWith(pageUri, files) or #strings.startsWith(pageUri, ftps) or #strings.startsWith(pageUri, webservices) or #strings.startsWith(pageUri, generals) } ? 'active' : ''"
							>
							<span><i class="fas fa-map-marker-alt"></i> 端点管理</span>
						</a>
						<div id="nav-endpoint" class="collapse" th:classappend="${ #strings.startsWith(pageUri, rests) or #strings.startsWith(pageUri, https) or #strings.startsWith(pageUri, files) or #strings.startsWith(pageUri, ftps) or #strings.startsWith(pageUri, webservices) or #strings.startsWith(pageUri, generals) } ? 'show' : ''">
							<ul class="nav flex-column pl-4 pb-4">
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, rests)} ? 'active' : ''">
									<a class="nav-link" th:href="${rests}">rest</a>
								</li>
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, https)} ? 'active' : ''">
									<a class="nav-link" th:href="${https}">http</a>
								</li>
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, files)} ? 'active' : ''">
									<a class="nav-link" th:href="${files}">file</a>
								</li>
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, ftps)} ? 'active' : ''">
									<a class="nav-link" th:href="${ftps}">ftp</a>
								</li>
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, webservices)} ? 'active' : ''">
									<a class="nav-link" th:href="${webservices}">webservice</a>
								</li>
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, generals)} ? 'active' : ''">
									<a class="nav-link" th:href="${generals}">general</a>
								</li>
							</ul>
						</div>
					</li>


					<li class="nav-item"
						th:with="routes=@{/routes}"
						th:classappend="(${pageUri} eq ${routes}) ? 'active' : ''">
						<a class="nav-link" th:href="${routes}"><i class="fas fa-route"></i> 路由管理</a>
					</li>
					<!-- 
					<li class="nav-item" 
						th:with="logs=@{/logs}" 
						th:classappend="${pageUri} eq ${logs} ? 'active' : ''">
						<a class="nav-link" th:href="${logs}"><i class="far fa-clipboard"></i> 服务日志</a>
					</li>
					 -->
					
					<li class="nav-item" 
						th:with="statistics_route=@{/statistics-route}, statistics_endpoint=@{/statistics-endpoint}"
						th:classappend="${ #strings.startsWith(pageUri, statistics_route) or #strings.startsWith(pageUri, statistics_endpoint) } ? 'active' : ''"
						>
						<a class="nav-link" href="#nav-syst" data-toggle="collapse"
							th:attr="aria-expanded=${ #strings.startsWith(pageUri, statistics_route) or #strings.startsWith(pageUri, statistics_endpoint) }"
							th:classappend="${ #strings.startsWith(pageUri, statistics_route) or #strings.startsWith(pageUri, statistics_endpoint) } ? 'active' : ''"
							>
							<span><i class="fas fa-chart-pie"></i> 统计分析</span>
						</a>
						<div id="nav-syst" class="collapse" th:classappend="${ #strings.startsWith(pageUri, statistics_route) or #strings.startsWith(pageUri, statistics_endpoint) } ? 'show' : ''">
							<ul class="nav flex-column pl-4 pb-4">
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, statistics_route)} ? 'active' : ''">
									<a class="nav-link" th:href="${statistics_route}">路由统计分析</a>
								</li>
								<li class="nav-item" th:classappend="${#strings.startsWith(pageUri, statistics_endpoint)} ? 'active' : ''">
									<a class="nav-link" th:href="${statistics_endpoint}">端点统计分析</a>
								</li>
							</ul>
						</div>
					</li>

					<li class="nav-item"
						th:with="workers=@{/workers}"
						th:classappend="(${pageUri} eq ${workers}) ? 'active' : ''">
						<a class="nav-link" th:href="${workers}"><i class="fas fa-cogs"></i> workers</a>
					</li>
				</ul>
			</div>
			<div class="main-container">
				<th:block layout:fragment="content"></th:block>
			</div>
			
			<div class="footer">
				<div class="">© 2019 成都鼎安华智慧物联网股份有限公司 版权所有</div>
				<div>技术支持：028-68360288</div>
			</div>
			
		</div>
		
	</body>
